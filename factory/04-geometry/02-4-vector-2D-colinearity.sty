% == PACKAGES USED == %


\RequirePackage{tikz}
\usetikzlibrary{calc}
\RequirePackage{nicematrix}


% == DEFINITIONS == %

% Source
%	* F. Pantigny gives me good advices to use its great package nicematrix.
%	* https://tex.stackexchange.com/a/548662/6880

\newcommand\cdetplane{\@ifstar{\@cdetplane@star}{\@cdetplane@no@star}}

\newcommand\@cdetplane@star[6]{%
	\begin{vNiceMatrix}[first-row]
		#1 & #4 \\
		#2 & #5 \\
		#3 & #6
	\end{vNiceMatrix}
}

\newcommand\@cdetplane@no@star[6]{%
	\begin{vNiceMatrix}[first-row,columns-width=1.1em]
		#1 & #4  \\
		#2 & #5  \\
		#3 & #6
   		%%
		\CodeAfter
    	\begin{tikzpicture}
    		\path (1-1.east) 
    			  -- node[below = 0.45em,
			  			  red,
						  circle,
						  inner sep = 1pt] 
			         (minus) {\tiny$-$}
			      (1-2.west);
    		\draw [red,->]
     			   let \p1 = ($(minus.east) - (minus.center)$) in 
    	    		   ([xshift = 0.5mm]1-1.east)
			           to[out = 0, in = 137.5]
			           (minus.50)
		   			   arc[start angle = 50,
					       end angle = -230,
					       radius = \x1] 
    	    		   to[out = 42.5, in =190]
			           ([xshift = -0.3mm]1-1.east-|1-2.west);
    	\end{tikzpicture}   
	\end{vNiceMatrix}
}


\newcommand\vcdetplane{\@ifstar{\@vcdetplane@star}{\@vcdetplane@no@star}}

\newcommand\@vcdetplane@star[6]{%
    \@cdetplane@star{\vect#1}{#2}{#3}%
                    {\vect#4}{#5}{#6}%
}

\newcommand\@vcdetplane@no@star[6]{%
    \@cdetplane@no@star{\vect#1}{#2}{#3}%
                       {\vect#4}{#5}{#6}%
}
