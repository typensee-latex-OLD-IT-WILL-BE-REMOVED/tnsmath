%\intervalO au lieu de \intervalOO
%\intervalC au lieu de \intervalC

\documentclass[12pt,a4paper]{article}

% == FOR DOC AND TESTS - START == %

\usepackage[utf8]{inputenc}
\usepackage{ucs}
\usepackage[top=2cm, bottom=2cm, left=1.5cm, right=1.5cm]{geometry}

\usepackage{color}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

\usepackage{enumitem}

\usepackage{amsthm}

\usepackage{tcolorbox}
\tcbuselibrary{listings}

\usepackage{pgffor}
\usepackage{xstring}

\usepackage{varioref}


% MISC

\setlength{\parindent}{0cm}
\setlist{noitemsep}

\theoremstyle{definition}
\newtheorem*{remark}{Remark}

\usepackage[raggedright]{titlesec}

\titleformat{\paragraph}[hang]{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{0.5em}


% Technical IDs

\newwrite\tempfile

\immediate\openout\tempfile=x-\jobname.macros-x.txt

\AtEndDocument{\immediate\closeout\tempfile}

\newcommand\IDconstant[1]{%
    \immediate\write\tempfile{constant@#1}%
}

\makeatletter
	\newcommand\IDmacro{\@ifstar{\@IDmacro@star}{\@IDmacro@no@star}}

    \newcommand\@IDmacro@no@star[3]{%
        \texttt{%
        	\textbackslash#1%
        	\IfStrEq{#2}{0}{}{%
        		\,\,[#2 Option%
				\IfStrEq{#2}{1}{}{s}]%
			}%
    	    \IfStrEq{#3}{}{}{%
	    		\,\,(#3 Argument%
				\IfStrEq{#3}{1}{}{s})%
			}
	   	}
        \immediate\write\tempfile{macro,#1,#2,#3}%
    }

    \newcommand\@IDmacro@star[2]{%
        \@IDmacro@no@star{#1}{0}{#2}%
    }

	\newcommand\@IDoptarg{\@ifstar{\@IDoptarg@star}{\@IDoptarg@no@star}}

	\newcommand\@IDoptarg@star[2]{%
    	\vspace{0.5em}
		--- \texttt{#1%
			\IfStrEq{#2}{}{:}{\,#2:}%
		}%
	}

	\newcommand\@IDoptarg@no@star[2]{%
    	\IfStrEq{#2}{}{%
			\@IDoptarg@star{#1}{}%
		}{%
			\@IDoptarg@star{#1}{\##2}%
		}%
	}

	\newcommand\IDkey[1]{%
    	\@IDoptarg*{Option}{{\itshape "#1"}}%
	}

	\newcommand\IDoption[1]{%
    	\@IDoptarg{Option}{#1}%
	}

	\newcommand\IDarg[1]{%
    	\@IDoptarg{Argument}{#1}%
	}
\makeatother

% == FOR DOC AND TESTS - END == %



% == PACKAGES USED == %

\usepackage{amsmath}
\usepackage{stmaryrd}
\usepackage{relsize}


% == DEFINITIONS == %

\makeatletter
    \newcommand\@interval@tool@star[5]{%
    	\ensuremath{ \left#1 \vphantom{\relsize{1.25}{\text{$\displaystyle F_1^2$}}} \right. \!\! #2 #3 #4 \left. \vphantom{\relsize{1.25}{\text{$\displaystyle F_1^2$}}} \!\! \right#5}%
	}

    \newcommand\@interval@tool@no@star[5]{\ensuremath{ \left#1 #2 #3 #4 \right#5}}


% Macros for intervals - START

% Macros for french real intervals

    \newcommand\intervalCO{\@ifstar{\@intervalCO@star}{\@intervalCO@no@star}}
    \newcommand\@intervalCO@no@star[2]{\ensuremath{\@interval@tool@no@star{[}{#1}{;}{#2}{[}}}
    \newcommand\@intervalCO@star[2]{\ensuremath{\@interval@tool@star{[}{#1}{;}{#2}{[}}}

    \newcommand\intervalC{\@ifstar{\@intervalC@star}{\@intervalC@no@star}}
    \newcommand\@intervalC@no@star[2]{\ensuremath{\@interval@tool@no@star{[}{#1}{;}{#2}{]}}}
    \newcommand\@intervalC@star[2]{\ensuremath{\@interval@tool@star{[}{#1}{;}{#2}{]}}}

    \newcommand\intervalO{\@ifstar{\@intervalO@star}{\@intervalO@no@star}}
    \newcommand\@intervalO@no@star[2]{\ensuremath{\@interval@tool@no@star{]}{#1}{;}{#2}{[}}}
    \newcommand\@intervalO@star[2]{\ensuremath{\@interval@tool@star{]}{#1}{;}{#2}{[}}}

    \newcommand\intervalOC{\@ifstar{\@intervalOC@star}{\@intervalOC@no@star}}
    \newcommand\@intervalOC@no@star[2]{\ensuremath{\@interval@tool@no@star{]}{#1}{;}{#2}{]}}}
    \newcommand\@intervalOC@star[2]{\ensuremath{\@interval@tool@star{]}{#1}{;}{#2}{]}}}

% Macros for american real intervals

    \newcommand\intervalCP{\@ifstar{\@intervalCP@star}{\@intervalCP@no@star}}
    \newcommand\@intervalCP@no@star[2]{\ensuremath{\@interval@tool@no@star{[}{#1}{;}{#2}{)}}}
    \newcommand\@intervalCP@star[2]{\ensuremath{\@interval@tool@star{[}{#1}{;}{#2}{)}}}

    \newcommand\intervalP{\@ifstar{\@intervalP@star}{\@intervalP@no@star}}
    \newcommand\@intervalP@no@star[2]{\ensuremath{\@interval@tool@no@star{(}{#1}{;}{#2}{)}}}
    \newcommand\@intervalP@star[2]{\ensuremath{\@interval@tool@star{(}{#1}{;}{#2}{)}}}

    \newcommand\intervalPC{\@ifstar{\@intervalPC@star}{\@intervalPC@no@star}}
    \newcommand\@intervalPC@no@star[2]{\ensuremath{\@interval@tool@no@star{(}{#1}{;}{#2}{]}}}
    \newcommand\@intervalPC@star[2]{\ensuremath{\@interval@tool@star{(}{#1}{;}{#2}{]}}}

% Macros for discrete intervals

    \newcommand\ZintervalCO{\@ifstar{\@ZintervalCO@star}{\@ZintervalCO@no@star}}
    \newcommand\@ZintervalCO@no@star[2]{\ensuremath{\@interval@tool@no@star{\llbracket}{#1}{;}{#2}{\llbracket}}}
    \newcommand\@ZintervalCO@star[2]{\ensuremath{\@interval@tool@star{\llbracket}{#1}{;}{#2}{\llbracket}}}

    \newcommand\ZintervalC{\@ifstar{\@ZintervalC@star}{\@ZintervalC@no@star}}
    \newcommand\@ZintervalC@no@star[2]{\ensuremath{\@interval@tool@no@star{\llbracket}{#1}{;}{#2}{\rrbracket}}}
    \newcommand\@ZintervalC@star[2]{\ensuremath{\@interval@tool@star{\llbracket}{#1}{;}{#2}{\rrbracket}}}

    \newcommand\ZintervalO{\@ifstar{\@ZintervalO@star}{\@ZintervalO@no@star}}
    \newcommand\@ZintervalO@no@star[2]{\ensuremath{\@interval@tool@no@star{\rrbracket}{#1}{;}{#2}{\llbracket}}}
    \newcommand\@ZintervalO@star[2]{\ensuremath{\@interval@tool@star{\rrbracket}{#1}{;}{#2}{\llbracket}}}

    \newcommand\ZintervalOC{\@ifstar{\@ZintervalOC@star}{\@ZintervalOC@no@star}}
    \newcommand\@ZintervalOC@no@star[2]{\ensuremath{\@interval@tool@no@star{\rrbracket}{#1}{;}{#2}{\rrbracket}}}
    \newcommand\@ZintervalOC@star[2]{\ensuremath{\@interval@tool@star{\rrbracket}{#1}{;}{#2}{\rrbracket}}}

% Macros for intervals - END

\makeatother


\begin{document}

% \section{Sets}

    \subsection{Intervals}

        \subsubsection{Real intervals - French (?) notation}

            \paragraph{Example of use \#1}

\begin{tcblisting}{}
In $I = ]a ; b] = \intervalOC{a}{b}$, you can see that the macro used solves
a spacing problem.

% The syntax refers to O-pened and C-losed but CC and OO are reduced to C and O.
\end{tcblisting}


            \paragraph{Example of use \#2}

The delimiters automatically stretches vertically, but you can use the @star version of a macro if you don't want this feature. In that case, the delimiters are a little bigger than traditional hooks. Here is an example.

\begin{tcblisting}{}
$\displaystyle \intervalC{ \frac{1}{2} }{ 1^{2^{3}} }
             = [ \frac{1}{2} ; 1^{2^{3}} ]
             = \intervalC*{ \frac{1}{2} }{ 1^{2^{3}} }$
\end{tcblisting}


            \paragraph{Technical IDs}

For all the macros above, the @star version produces intervals with delimiters that fit vertically with the bounds of the interval.


\bigskip


% Docs for french real intervals - START

\IDmacro*{intervalCO}{2}

\IDmacro*{intervalCO*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalCO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalCO{a}{b}$.


\bigskip


\IDmacro*{intervalC}{2}

\IDmacro*{intervalC*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalC{a}{b}$.


\bigskip


\IDmacro*{intervalO}{2}

\IDmacro*{intervalO*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalO{a}{b}$.


\bigskip


\IDmacro*{intervalOC}{2}

\IDmacro*{intervalOC*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalOC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalOC{a}{b}$.

% Docs for french real intervals - END



        \subsubsection{Real intervals - American notation}

            \paragraph{Example of use}

\begin{tcblisting}{}
In America, we write a semi-closed interval $\intervalPC{a}{b} = (a ; b]$ and
an opened one $\intervalP{a}{b} = (a ; b)$.

% The syntax refers to P-arenthesis.
\end{tcblisting}


            \paragraph{Technical IDs}

For all the macros above, the @star version produces intervals with delimiters that fit vertically with the bounds of the interval.


\bigskip


% Docs for american real intervals - START

\IDmacro*{intervalCP}{2}

\IDmacro*{intervalCP*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalCP{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalCP{a}{b}$.


\bigskip


\IDmacro*{intervalP}{2}

\IDmacro*{intervalP*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalP{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalP{a}{b}$.


\bigskip


\IDmacro*{intervalPC}{2}

\IDmacro*{intervalPC*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalPC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalPC{a}{b}$.

% Docs for american real intervals - END



        \subsubsection{Discrete intervals of integers}

            \paragraph{Example of use}

\begin{tcblisting}{}
By definition, $\ZintervalC{-1}{4} = \{ -1 ; 0 ; 1 ; 2 ; 3 ; 4 \}$. So we also have
$\ZintervalC{-1}{4} = \ZintervalO{-2}{5}$.

% The syntax refers to Z the set of integers.
\end{tcblisting}


            \paragraph{Technical IDs}

For all the macros above, the @star version produces intervals with delimiters that fit vertically with the bounds of the interval.


\bigskip


% Docs for discrete intervals - START

\IDmacro*{ZintervalCO}{2}

\IDmacro*{ZintervalCO*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalCO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalCO{a}{b}$.


\bigskip


\IDmacro*{ZintervalC}{2}

\IDmacro*{ZintervalC*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalC{a}{b}$.


\bigskip


\IDmacro*{ZintervalO}{2}

\IDmacro*{ZintervalO*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalO{a}{b}$.


\bigskip


\IDmacro*{ZintervalOC}{2}

\IDmacro*{ZintervalOC*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalOC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalOC{a}{b}$.

% Docs for discrete intervals - END

\end{document}
