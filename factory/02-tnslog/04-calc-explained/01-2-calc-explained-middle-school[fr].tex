\documentclass[12pt,a4paper]{article}

\makeatletter
    \input{../../config/header[fr].sty}

    \usepackage{01-stepcalc}
\makeatother


\begin{document}

%\section{Détailler un raisonnement simple}

\subsection{Version pour les collégiens} \label{tnslog-stepcalc-proof-for-youngs}

L'environnement \env{stepcalc}
\footnote{
    Cet environnement utilise aussi le package \texttt{witharrows}.
}
avec les options \verb+style = ar+ et \verb+style = ar*+ imprime une rédaction plus classique tout en utilisant des flèches pour indiquer les explications
\emph{(\prefix{ar} est pour \whyprefix{ar}{row} soit \inenglish{flèche})}.
Dans ce cas d'utilisation, la macro \macro{explnext*} permet d'avoir une flèche unidirectionnelle, vers le haut ou le bas au choix, ou bien d'écrire deux indications dont l'une est montante et l'autre descendante.

\medskip

Il existe aussi l'option \verb+style = sar+ lorsque la toute 1\iere{} étape n'est pas expliquée
\emph{(\prefix{s} est pour \whyprefix{s}{hort} soit \inenglish{court})}.
Voir l'exemple \ref{tnslog:stepcalc-style:sar} page \pageref{tnslog:stepcalc-style:sar}.


% ---------------------- %


\newparaexample{L'opérateur dans la marge... ou pas}

Considérons le code suivant qui utilise \verb+style = ar+.

\begin{latexex}
\begin{stepcalc}[style = ar]
    (a + b)^2
        \explnext{}
    a^2 + 2 a b + b^2
\end{stepcalc}
\end{latexex}

Intégré dans un paragraphe, on obtient le rendu suivant qui vaut ce qu'il vaut ici.

\medskip

\begin{stepcalc}[style = ar]
    (a + b)^2
        \explnext{}
    a^2 + 2 a b + b^2
\end{stepcalc}


\bigskip

En utilisant \verb+style = ar*+ au lieu de \verb+style = ar+, on aboutit à ce qui suit qui semble mieux.

\medskip

\begin{stepcalc}[style = ar*]
    (a + b)^2
        \explnext{}
    a^2 + 2 a b + b^2
\end{stepcalc}


\bigskip

Dans la suite, on va se concentrer sur le style \verb+ar+ mais tout ce qui est dit pour ce style s'applique aussi à \verb+ar*+.

% ---------------------- %


\newparaexample{Des flèches à double sens}

\begin{latexex}
\begin{stepcalc}[style = ar]
    (a + b)^2
        \explnext{Identité remarquable}
    a^2 + 2 a b + b^2
        \explnext{}
    a^2 + b^2 + 2 a b
\end{stepcalc}
\end{latexex}


% ---------------------- %


\newparaexample{Des flèches unidirectionnelles}

Ce qui suit est juste là comme démo. car les explications y sont un peu farfelues.

\begin{latexex-flat}
\begin{stepcalc}[style = ar]
    (a + b)^2
        \explnext*{Via $P^2 = P \cdot P$.}
                  {Via $P \cdot P = P^2$.}
    (a + b) (a + b)
        \explnext*{Double développement.}%
                  {Double factorisation (pas simple).}
    a^2 + a b + b a + b^2
        \explnext*{Commutativité du produit.}%
                  {}
    a^2 + 2 a b + b^2
        \explnext*{}%
                  {Commutativité de l'addition.}
    a^2 + b^2 + 2 a b
\end{stepcalc}
\end{latexex-flat}


% ---------------------- %


\newparaexample{Ne pas expliquer le tout début}\label{tnslog:stepcalc-style:sar}

L'environnement \env{stepcalc} avec l'option \verb+style = sar+ débute différemment la mise en forme.
Bien entendu ici le tout premier \macro{explnext} doit avoir un argument vide !

\begin{latexex-flat}
\begin{stepcalc}[style = sar]
    (a + b) (a + b)
        \explnext{}
    (a + b)^2
        \explnext{Identité remarquable.}
    a^2 + b^2 + 2 a b
\end{stepcalc}
\end{latexex-flat}


% ---------------------- %


\newparaexample{Choisir son symbole}

Voici comment faire où l'implication finale est juste là pour la démonstration \emph{(on notera une petite bidouille un peu sale à faire pour avoir un alignement à peu près correct)}.

\begin{latexex}
\begin{stepcalc}[style = ar, ope = \iff]
    a^2 + 2 a b + b^2 = 0
        \explnext{}
    (a + b)^2 = 0
        \explnext[\:\implies]%
                 {$P^2 = 0$ ssi $P = 0$.}
    a + b = 0
\end{stepcalc}
\end{latexex}


Avec la version courte, on obtient ce qui suit.

\begin{latexex-flat}
\begin{stepcalc}[style = sar, ope = \iff]
    a^2 + 2 a b + b^2 = 0
        \explnext{}
    (a + b)^2 = 0
        \explnext[\:\implies]%
                 {$P^2 = 0$ ssi $P = 0$.}
    a + b = 0
\end{stepcalc}
\end{latexex-flat}

\end{document}
