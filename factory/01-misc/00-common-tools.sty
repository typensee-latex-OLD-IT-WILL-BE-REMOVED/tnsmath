% == PACKAGES USED == %

\RequirePackage{amsmath}
\RequirePackage{relsize}
\RequirePackage{xparse}


% == DEFINITIONS == %

% Settable texts
\@ifpackagewith{babel}{french}{
    \newcommand\lymathsep{;}
    \newcommand\lymathsubsep{,}
    \newcommand\textopchoice{choix}
    \newcommand\textopcond{cond}
    \newcommand\textopdef{d√©f}
    \newcommand\textophyp{hyp}
    \newcommand\textopid{id}
}{
	\newcommand\lymathsep{,}
	\newcommand\lymathsubsep{;}
    \newcommand\textopchoice{choice}
    \newcommand\textopcond{cond}
    \newcommand\textopdef{def}
    \newcommand\textophyp{hyp}
    \newcommand\textopid{id}
}


\newcommand\textexplainleft{\{}
\newcommand\textexplainright{\}}
\newcommand\textexplainspacebefore{\qquad}
\newcommand\textexplainspacein{\qquad}


% Tools - Apply same macro to all arguments

% #1        : main macro
% #2        : macro to apply to arguments
% #3 and #4 : the two arguments
\newcommand\@apply@macro@two@args[4]{%
	#1{#2{#3}}{#2{#4}}%
}




% Tools - Intervals

\newcommand\@extra@phantom{%
	\vphantom{\relsize{1.25}{\text{$\displaystyle F_1^2$}}}%
}

\newcommand\@interval@tool@star[5]{%
	\ensuremath{ \left#1 \@extra@phantom \right. \!\! #2 #3 #4 \left. \@extra@phantom \!\! \right#5}%
}

\newcommand\@interval@tool@no@star[5]{\ensuremath{ \left#1 #2 #3 #4 \right#5}}


% Tools - Multi-arguments
%
% Source : the following lines come directly for the following post
%
%    * https://tex.stackexchange.com/a/475291/6880

\ExplSyntaxOn
% General purpose macro for defining other macros
	\NewDocumentCommand{\makemultiargument}{mmmmmo}{
		\lymath_multiarg:nnnnnn{#1}{#2}{#3}{#4}{#5}{#6}
	}
 
% Allocate a private variable
	\seq_new:N \l__lymath_generic_seq

% The internal version of the general purpose macro
	\cs_new_protected:Nn \lymath_multiarg:nnnnnn{
		% #1 = separator
		% #2 = multiargument
		% #3 = code before
	  	% #4 = code between
	  	% #5 = code after
	  	% #6 = ornament to items

		% A group allows nesting
		\group_begin:
	 	% Split the multiargument into parts
		\seq_set_split:Nnn \l__lymath_generic_seq { #1 } { #2 }
		% Apply the ornament to the items
	  	\tl_if_novalue:nF { #6 }{
	    	\seq_set_eq:NN \l__lymath_temp_seq \l__lymath_generic_seq
	    	\seq_set_map:NNn \l__lymath_generic_seq \l__lymath_generic_seq { #6 }
	   	}
		% Execute the <code before>
	  	#3
		% Deliver the items, with the chosen material between them
	  	\seq_use:Nn \l__lymath_generic_seq { #4 }
  		% Execute the <code after>
	 	#5
  		% End the group started at the beginning
	  	\group_end:
	}	
\ExplSyntaxOff
