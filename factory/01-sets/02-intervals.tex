%\intervalO au lieu de \intervalOO
%\intervalC au lieu de \intervalC

\documentclass[12pt,a4paper]{article}

% == FOR DOC AND TESTS - START == %

\usepackage[utf8]{inputenc}
\usepackage{ucs}
\usepackage[top=2cm, bottom=2cm, left=1.5cm, right=1.5cm]{geometry}

\usepackage{color}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

\usepackage{enumitem}

\usepackage{amsthm}

\usepackage{tcolorbox}
\tcbuselibrary{listings}

\usepackage{pgffor}
\usepackage{xstring}


% MISC

\setlength{\parindent}{0cm}
\setlist{noitemsep}

\theoremstyle{definition}
\newtheorem*{remark}{Remark}


% Technical IDs

\newwrite\tempfile

\immediate\openout\tempfile=x-\jobname.macros-x.txt

\AtEndDocument{\immediate\closeout\tempfile}

\newcommand\IDconstant[1]{%
    \immediate\write\tempfile{constant@#1}%
}

\makeatletter
	\newcommand\IDmacro{\@ifstar{\@IDmacroStar}{\@IDmacroNoStar}}
	
    \newcommand\@IDmacroNoStar[3]{%
        \texttt{%
        	\textbackslash#1%
        	\IfStrEq{#2}{0}{}{%
        		\,\,[#2 Option%
				\IfStrEq{#2}{1}{}{s}]%
			}%
    	    \,\,(#3 Argument%
				\IfStrEq{#3}{1}{}{s})%
	   	}
        \immediate\write\tempfile{macro@#1@#2@#3}%
    }

    \newcommand\@IDmacroStar[2]{%
        \@IDmacroNoStar{#1}{0}{#2}%
    }

	\newcommand\@IDoptarg[2]{%
    	\vspace{0.5em}
		--- \texttt{#1%
			\IfStrEq{#2}{}{:}{\,\##2:}%
		}%
	}

	\newcommand\IDoption[1]{%
    	\@IDoptarg{Option}{#1}%
	}

	\newcommand\IDarg[1]{%
    	\@IDoptarg{Argument}{#1}%
	}
\makeatother

% == FOR DOC AND TESTS - END == %



% == PACKAGES USED == %

\usepackage{amsmath}
\usepackage{stmaryrd}
\usepackage{relsize}


% == DEFINITIONS == %

\makeatletter
    \newcommand\@interToolNoStar[4]{%
    	\ensuremath{ \left#1 \vphantom{\relsize{1.25}{\text{$\displaystyle F_1^2$}}} \right. \!\! #2 ; #3 \left. \vphantom{\relsize{1.25}{\text{$\displaystyle F_1^2$}}} \!\! \right#4}%
	}

    \newcommand\@interToolStar[4]{\ensuremath{ \left#1 #2 \, ; #3 \right#4}}
 
   
% Macros for intervals - START

% Macros for french real intervals

    \newcommand\intervalCO{\@ifstar{\@intervalCOStar}{\@intervalCONoStar}}
    \newcommand\@intervalCONoStar[2]{\ensuremath{\@interToolNoStar{[}{#1}{#2}{[}}}
    \newcommand\@intervalCOStar[2]{\ensuremath{\@interToolStar{[}{#1}{#2}{[}}}

    \newcommand\intervalC{\@ifstar{\@intervalCStar}{\@intervalCNoStar}}
    \newcommand\@intervalCNoStar[2]{\ensuremath{\@interToolNoStar{[}{#1}{#2}{]}}}
    \newcommand\@intervalCStar[2]{\ensuremath{\@interToolStar{[}{#1}{#2}{]}}}

    \newcommand\intervalO{\@ifstar{\@intervalOStar}{\@intervalONoStar}}
    \newcommand\@intervalONoStar[2]{\ensuremath{\@interToolNoStar{]}{#1}{#2}{[}}}
    \newcommand\@intervalOStar[2]{\ensuremath{\@interToolStar{]}{#1}{#2}{[}}}

    \newcommand\intervalOC{\@ifstar{\@intervalOCStar}{\@intervalOCNoStar}}
    \newcommand\@intervalOCNoStar[2]{\ensuremath{\@interToolNoStar{]}{#1}{#2}{]}}}
    \newcommand\@intervalOCStar[2]{\ensuremath{\@interToolStar{]}{#1}{#2}{]}}}

% Macros for american real intervals

    \newcommand\intervalCP{\@ifstar{\@intervalCPStar}{\@intervalCPNoStar}}
    \newcommand\@intervalCPNoStar[2]{\ensuremath{\@interToolNoStar{[}{#1}{#2}{)}}}
    \newcommand\@intervalCPStar[2]{\ensuremath{\@interToolStar{[}{#1}{#2}{)}}}

    \newcommand\intervalP{\@ifstar{\@intervalPStar}{\@intervalPNoStar}}
    \newcommand\@intervalPNoStar[2]{\ensuremath{\@interToolNoStar{(}{#1}{#2}{)}}}
    \newcommand\@intervalPStar[2]{\ensuremath{\@interToolStar{(}{#1}{#2}{)}}}

    \newcommand\intervalPC{\@ifstar{\@intervalPCStar}{\@intervalPCNoStar}}
    \newcommand\@intervalPCNoStar[2]{\ensuremath{\@interToolNoStar{(}{#1}{#2}{]}}}
    \newcommand\@intervalPCStar[2]{\ensuremath{\@interToolStar{(}{#1}{#2}{]}}}

% Macros for discrete intervals

    \newcommand\ZintervalCO{\@ifstar{\@ZintervalCOStar}{\@ZintervalCONoStar}}
    \newcommand\@ZintervalCONoStar[2]{\ensuremath{\@interToolNoStar{\llbracket}{#1}{#2}{\llbracket}}}
    \newcommand\@ZintervalCOStar[2]{\ensuremath{\@interToolStar{\llbracket}{#1}{#2}{\llbracket}}}

    \newcommand\ZintervalC{\@ifstar{\@ZintervalCStar}{\@ZintervalCNoStar}}
    \newcommand\@ZintervalCNoStar[2]{\ensuremath{\@interToolNoStar{\llbracket}{#1}{#2}{\rrbracket}}}
    \newcommand\@ZintervalCStar[2]{\ensuremath{\@interToolStar{\llbracket}{#1}{#2}{\rrbracket}}}

    \newcommand\ZintervalO{\@ifstar{\@ZintervalOStar}{\@ZintervalONoStar}}
    \newcommand\@ZintervalONoStar[2]{\ensuremath{\@interToolNoStar{\rrbracket}{#1}{#2}{\llbracket}}}
    \newcommand\@ZintervalOStar[2]{\ensuremath{\@interToolStar{\rrbracket}{#1}{#2}{\llbracket}}}

    \newcommand\ZintervalOC{\@ifstar{\@ZintervalOCStar}{\@ZintervalOCNoStar}}
    \newcommand\@ZintervalOCNoStar[2]{\ensuremath{\@interToolNoStar{\rrbracket}{#1}{#2}{\rrbracket}}}
    \newcommand\@ZintervalOCStar[2]{\ensuremath{\@interToolStar{\rrbracket}{#1}{#2}{\rrbracket}}}

% Macros for intervals - END

\makeatother


\begin{document}

\section{Intervals}

    \subsection{Real intervals - French (?) notation}

        \subsubsection{Example of use \#1}

\begin{tcblisting}{}
In $\intervalOC{a}{b} = ]a ; b] = \intervalOC{a}{b}$, you can see that the macro
used solves a spacing problem, and that the delimiters are a little bigger.

% The syntax refers to O-pened and C-losed but CC and OO are reduced to C and O.
\end{tcblisting}


        \subsubsection{Example of use \#2}

\begin{tcblisting}{}
You can use the star version of a macro if you want the delimiters to stretch 
vertically.

$\displaystyle \intervalC{ \frac{1}{2} }{ 1^{2^{3}} }
             = [ \frac{1}{2} ; 1^{2^{3}} ] 
             = \intervalC*{ \frac{1}{2} }{ 1^{2^{3}} }$
\end{tcblisting}


        \subsubsection{Technical IDs}

For all the macros above, the star version produces intervals with delimiters that fit vertically with the bounds of the interval.


\bigskip


% Docs for french real intervals - START

\IDmacro*{intervalCO}{2}

\IDmacro*{intervalCO*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalCO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalCO{a}{b}$.


\bigskip


\IDmacro*{intervalC}{2}

\IDmacro*{intervalC*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalC{a}{b}$.


\bigskip


\IDmacro*{intervalO}{2}

\IDmacro*{intervalO*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalO{a}{b}$.


\bigskip


\IDmacro*{intervalOC}{2}

\IDmacro*{intervalOC*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalOC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalOC{a}{b}$.

% Docs for french real intervals - END



    \subsection{Real intervals - American notation}

        \subsubsection{Example of use}

\begin{tcblisting}{}
A semi-closed interval $\intervalPC{a}{b} = (a ; b]$ and an opened one
$\intervalP{a}{b} = (a ; b)$.

% The syntax refers to P-arenthesis.
\end{tcblisting}


        \subsubsection{Technical IDs}

For all the macros above, the star version produces intervals with delimiters that fit vertically with the bounds of the interval.


\bigskip


% Docs for american real intervals - START

\IDmacro*{intervalCP}{2}

\IDmacro*{intervalCP*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalCP{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalCP{a}{b}$.


\bigskip


\IDmacro*{intervalP}{2}

\IDmacro*{intervalP*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalP{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalP{a}{b}$.


\bigskip


\IDmacro*{intervalPC}{2}

\IDmacro*{intervalPC*}{2}

\IDarg{1} lower bound $a$ of the interval $\intervalPC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\intervalPC{a}{b}$.

% Docs for american real intervals - END



    \subsection{Discrete intervals of integers}

        \subsubsection{Example of use}

\begin{tcblisting}{}
By definition, $\ZintervalC{-1}{4} = \{ -1 ; 0 ; 1 ; 2 ; 3 ; 4 \}$. So we also have
$\ZintervalC{-1}{4} = \ZintervalO{-2}{5}$.

% The syntax refers to Z the set of integers.
\end{tcblisting}


        \subsubsection{Technical IDs}

For all the macros above, the star version produces intervals with delimiters that fit vertically with the bounds of the interval.


\bigskip


% Docs for discrete intervals - START

\IDmacro*{ZintervalCO}{2}

\IDmacro*{ZintervalCO*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalCO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalCO{a}{b}$.


\bigskip


\IDmacro*{ZintervalC}{2}

\IDmacro*{ZintervalC*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalC{a}{b}$.


\bigskip


\IDmacro*{ZintervalO}{2}

\IDmacro*{ZintervalO*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalO{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalO{a}{b}$.


\bigskip


\IDmacro*{ZintervalOC}{2}

\IDmacro*{ZintervalOC*}{2}

\IDarg{1} lower bound $a$ of the interval $\ZintervalOC{a}{b}$.

\IDarg{2} upper bound $b$ of the interval $\ZintervalOC{a}{b}$.

% Docs for discrete intervals - END

\end{document}
